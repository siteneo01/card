<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì•„ì´ë³´ëŒ ì¼ì‚°/í™”ì •/íŒŒì£¼ì„¼í„° ì‹ ê·œíšŒì› íšŒë¹„ ê³„ì‚°ê¸°</title>
  <style>
    :root {
      --gray-900: #1f2937;
      --gray-700: #374151;
      --gray-100: #f3f4f6;
      --brand: #2563eb;
      --accent: #fffacd;
      --soft-blue: #e6f7ff;
    }
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      margin: 24px;
      color: var(--gray-900);
      background: #fff;
      line-height: 1.45;
    }
    h1 {
      background-color: #808080;
      color: white;
      padding: 12px 16px;
      text-align: center;
      border-radius: 10px;
      margin-top: 0;
    }
    label { font-weight: 600; }
    input, button {
      margin: 6px 0;
      padding: 10px 12px;
      font-size: 16px;
    }
    input[type="date"] {
      border: 1px solid #d1d5db;
      border-radius: 8px;
    }
    button {
      border: 0;
      border-radius: 8px;
      background: var(--brand);
      color: #fff;
      font-weight: 700;
      cursor: pointer;
    }
    button:disabled { opacity: .6; cursor: not-allowed; }

    #result { margin-top: 20px; }

    table {
      width: 100%;
      margin-top: 10px;
      border-collapse: collapse;
      table-layout: auto;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      overflow: hidden;
    }
    table, th, td { border: 1px solid #e5e7eb; }
    th, td {
      padding: 10px 12px;
      text-align: center;
    }
    th { background-color: #D3D3D3; }

    .fee-breakdown { margin-top: 30px; border-top: 2px solid #000; padding-top: 20px; }
    .total-fee { font-weight: bold; background-color: var(--accent); }

    .total-fee-box {
      background-color: var(--accent);
      padding: 12px;
      font-size: 18px;
      margin-top: 20px;
      font-weight: bold;
      border-radius: 8px;
      border: 1px dashed #f59e0b;
    }

    /* ê³µí†µ ìŠ¤íƒ€ì¼ */
    .fee-item {
      color: #1d4ed8;
      font-size: 18px;
      padding-left: 20px;
      font-weight: bold;
      text-align: left;
    }
    .next-payment-date {
      background-color: #FFFFE0;
      padding: 10px 12px;
      font-size: 18px;
      color: #1d4ed8;
      font-weight: bold;
      text-align: left;
      border-radius: 8px;
      border: 1px dashed #f59e0b;
    }
    .hint { color: var(--gray-700); font-size: 14px; margin-top: 4px; }
  </style>
</head>
<body>
  <h1>ì•„ì´ë³´ëŒ ì¼ì‚°/í™”ì •/íŒŒì£¼ì„¼í„° ì‹ ê·œíšŒì› íšŒë¹„ ê³„ì‚°ê¸°</h1>

  <label for="startDate">ì‹œì‘ ë‚ ì§œ (YYYY-MM-DD):</label>
  <input type="date" id="startDate" />
  <button id="calcBtn" onclick="calculateFee()">ê³„ì‚°í•˜ê¸°</button>
  <div class="hint">ì²« ë‹¬ì€ í•´ë‹¹ ì›”ì˜ ë‚¨ì€ ì¼ìˆ˜ ê¸°ì¤€ìœ¼ë¡œ ì¼í•  ê³„ì‚°í•˜ë©°, ë‘˜ì§¸/ì…‹ì§¸ ë‹¬ì€ ì •ì•¡. ê°€ì…ë¹„ 3ë§Œì› í¬í•¨. ì´ì•¡ì€ <b>ì‹­(10) ì› ë‹¨ìœ„ ì ˆì‚¬</b>í•©ë‹ˆë‹¤.</div>

  <div id="result" aria-live="polite">
    <h2>ê²°ê³¼</h2>

    <div class="total-fee-box">
      <p class="fee-item"> â— ì›ì¥ë‹˜(ì˜ì–´ ì „ê³µì) ì´ íšŒë¹„ : <span id="directorFinalFeeResult"></span></p>
      <p class="fee-item"> â— ê°•ì‚¬ë‹˜(ì˜ì–´ ë¹„ì „ê³µì) ì´ íšŒë¹„ : <span id="instructorFinalFeeResult"></span></p>
    </div>

    <br />

    <div class="next-payment-date">
      <p> â— ë‹¤ìŒ íšŒë¹„ ë‚©ë¶€ì¼ (íšŒì›ì—ê²Œ ê¼­ ì•Œë ¤ë“œë¦´ ê²ƒ!): <span id="nextPaymentDateResult"></span></p>
    </div>

    <div class="fee-breakdown">
      <h3>ì›ì¥ë‹˜(ì˜ì–´ ì „ê³µì) íšŒë¹„ê³„ì‚° ì„¸ë¶€ë‚´ì—­</h3>
      <table id="directorFeeBreakdown">
        <thead>
          <tr>
            <th>í•­ëª©</th>
            <th>ê³„ì‚° ë‚´ì—­</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span style="color:blue; font-weight:bold;">1ê°œì›”ì°¨ ì¼í•  ë‚ ì§œ</span></td>
            <td id="directorDays" style="color:blue; font-weight:bold; background-color:var(--soft-blue);"></td>
          </tr>
          <tr>
            <td>â‘  1ê°œì›”ì°¨ íšŒë¹„</td>
            <td id="directorFirstMonthFee"></td>
          </tr>
          <tr>
            <td>â‘¡ 2ê°œì›”ì°¨ íšŒë¹„</td>
            <td>190,000 ì›</td>
          </tr>
          <tr>
            <td>â‘¢ 3ê°œì›”ì°¨ íšŒë¹„</td>
            <td>190,000 ì›</td>
          </tr>
          <tr>
            <td>â‘£ ê°€ì…ë¹„</td>
            <td>30,000 ì›</td>
          </tr>
          <tr class="total-fee">
            <td>ì´ íšŒë¹„ (â‘ +â‘¡+â‘¢+â‘£ í•©ì‚° í›„ <b>ì‹­ ë‹¨ìœ„ ì ˆì‚¬</b>)</td>
            <td id="directorFinalFee"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="fee-breakdown">
      <h3>ê°•ì‚¬ë‹˜(ì˜ì–´ ë¹„ì „ê³µì) íšŒë¹„ê³„ì‚° ì„¸ë¶€ë‚´ì—­</h3>
      <table id="instructorFeeBreakdown">
        <thead>
          <tr>
            <th>í•­ëª©</th>
            <th>ê³„ì‚° ë‚´ì—­</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span style="color:blue; font-weight:bold;">1ê°œì›”ì°¨ ì¼í•  ë‚ ì§œ</span></td>
            <td id="instructorDays" style="color:blue; font-weight:bold; background-color:var(--soft-blue);"></td>
          </tr>
          <tr>
            <td>â‘  1ê°œì›”ì°¨ íšŒë¹„</td>
            <td id="instructorFirstMonthFee"></td>
          </tr>
          <tr>
            <td>â‘¡ 2ê°œì›”ì°¨ íšŒë¹„</td>
            <td>160,000 ì›</td>
          </tr>
          <tr>
            <td>â‘¢ 3ê°œì›”ì°¨ íšŒë¹„</td>
            <td>160,000 ì›</td>
          </tr>
          <tr>
            <td>â‘£ ê°€ì…ë¹„</td>
            <td>30,000 ì›</td>
          </tr>
          <tr class="total-fee">
            <td>ì´ íšŒë¹„ (â‘ +â‘¡+â‘¢+â‘£ í•©ì‚° í›„ <b>ì‹­ ë‹¨ìœ„ ì ˆì‚¬</b>)</td>
            <td id="instructorFinalFee"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    // YYYY-MM-DD ë¬¸ìì—´ ë°˜í™˜
    function formatISODate(date) {
      const y = date.getFullYear();
      const m = String(date.getMonth() + 1).padStart(2, "0");
      const d = String(date.getDate()).padStart(2, "0");
      return `${y}-${m}-${d}`;
    }

    // í•´ë‹¹ ì›”ì˜ ì´ ì¼ìˆ˜
    function daysInMonth(year, monthIndex0) {
      return new Date(year, monthIndex0 + 1, 0).getDate();
    }

    function calculateFee() {
      const startDateStr = document.getElementById("startDate").value;
      if (!startDateStr) {
        alert("ì‹œì‘ ë‚ ì§œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      const start = new Date(startDateStr);
      if (isNaN(start.getTime())) {
        alert("ìœ íš¨í•œ ë‚ ì§œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      const year = start.getFullYear();
      const month0 = start.getMonth(); // 0 ê¸°ë°˜
      const totalDays = daysInMonth(year, month0);
      const startDay = start.getDate();

      // ì‹œì‘ì¼ í¬í•¨, í•´ë‹¹ ì›” ë§ì¼ê¹Œì§€ ë‚¨ì€ ì¼ìˆ˜
      const daysLeft = totalDays - startDay + 1;

      // ìš”ê¸ˆ ì •ì˜
      const DIRECTOR_MONTHLY = 190000;
      const INSTRUCTOR_MONTHLY = 160000;
      const SIGNUP_FEE = 30000;

      // 1ê°œì›”ì°¨ ì¼í•  ê³„ì‚° (í•´ë‹¹ ì›” ì¼ìˆ˜ ê¸°ì¤€)
      const directorFirstMonthFee = Math.floor((DIRECTOR_MONTHLY / totalDays) * daysLeft);
      const instructorFirstMonthFee = Math.floor((INSTRUCTOR_MONTHLY / totalDays) * daysLeft);

      // 2,3ê°œì›” ì •ì•¡
      const directorSecondThird = DIRECTOR_MONTHLY * 2;
      const instructorSecondThird = INSTRUCTOR_MONTHLY * 2;

      // ì´ì•¡ (ê°€ì…ë¹„ í¬í•¨)
      const directorTotal = directorFirstMonthFee + directorSecondThird + SIGNUP_FEE;
      const instructorTotal = instructorFirstMonthFee + instructorSecondThird + SIGNUP_FEE;

      // ğŸ”§ ê·œì¹™: ì‹­(10) ì› ë‹¨ìœ„ ì ˆì‚¬ (ì˜ˆ: 12,345 â†’ 12,340)
      const truncate10 = (n) => Math.floor(n / 10) * 10;

      const directorFinal = truncate10(directorTotal);
      const instructorFinal = truncate10(instructorTotal);

      // ì¶œë ¥
      document.getElementById("directorDays").innerText = `${daysLeft}ì¼`;
      document.getElementById("directorFirstMonthFee").innerText = `${directorFirstMonthFee.toLocaleString("ko-KR")} ì›`;
      document.getElementById("directorFinalFee").innerText = `${directorFinal.toLocaleString("ko-KR")} ì›`;

      document.getElementById("instructorDays").innerText = `${daysLeft}ì¼`;
      document.getElementById("instructorFirstMonthFee").innerText = `${instructorFirstMonthFee.toLocaleString("ko-KR")} ì›`;
      document.getElementById("instructorFinalFee").innerText = `${instructorFinal.toLocaleString("ko-KR")} ì›`;

      document.getElementById("directorFinalFeeResult").innerText = `${directorFinal.toLocaleString("ko-KR")} ì›`;
      document.getElementById("instructorFinalFeeResult").innerText = `${instructorFinal.toLocaleString("ko-KR")} ì›`;

      // ë‹¤ìŒ íšŒë¹„ ë‚©ë¶€ì¼: ì‹œì‘ì¼ ê¸°ì¤€ 3ê°œì›” í›„ì˜ í•´ë‹¹ ì›” 1ì¼
      const nextPaymentDate = new Date(start);
      nextPaymentDate.setMonth(nextPaymentDate.getMonth() + 3);
      nextPaymentDate.setDate(1);
      document.getElementById("nextPaymentDateResult").innerText = formatISODate(nextPaymentDate);
    }

    // UX: ê¸°ë³¸ê°’ì„ ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì„¤ì •
    (function setTodayDefault() {
      const today = new Date();
      const el = document.getElementById("startDate");
      el.value = formatISODate(today);
    })();
  </script>
</body>
</html>
